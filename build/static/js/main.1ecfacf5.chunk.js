(this["webpackJsonpkino-domino"]=this["webpackJsonpkino-domino"]||[]).push([[0],Array(19).concat([function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),i=n(12),c=n.n(i),o=n(4),r=n(7),l=n(2),d=(n(19),n(3)),j=(n(20),n(21),n(0));var _=function(){return Object(j.jsxs)("header",{className:"promo page__section",children:[Object(j.jsxs)("div",{className:"promo__top",children:[Object(j.jsx)("a",{href:"#aboutProject",children:Object(j.jsx)("div",{className:"page__logo page__link"})}),Object(j.jsxs)("div",{className:"promo__authorization-container",children:[Object(j.jsx)(o.b,{to:"/signup",className:"promo__link page__link",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(j.jsx)(o.b,{to:"/movies",children:Object(j.jsx)("button",{type:"button",className:"promo__authorization-button page__link",children:"\u0412\u043e\u0439\u0442\u0438"})})]})]}),Object(j.jsx)("div",{className:"promo__central",children:Object(j.jsx)("h1",{className:"promo__title",children:"\u0423\u0447\u0435\u0431\u043d\u044b\u0439\xa0\u043f\u0440\u043e\u0435\u043a\u0442 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430 \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442\u0430 \u0412\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438."})})]})};n(23);var m=function(){return Object(j.jsxs)("section",{className:"main__navigation page__section",children:[Object(j.jsx)("a",{className:"page__link main__link",href:"#aboutProject",children:"\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0435"}),Object(j.jsx)("a",{className:"page__link main__link",href:"#techs",children:"\u0422\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438"}),Object(j.jsx)("a",{className:"page__link main__link",href:"#aboutMe",children:"\u0421\u0442\u0443\u0434\u0435\u043d\u0442"})]})};n(24);var u=function(){return Object(j.jsxs)("section",{id:"aboutProject",className:"about-project page__section",children:[Object(j.jsx)("div",{className:"about-project__title-container page__section-title-container",children:Object(j.jsx)("h2",{className:"page__section-title",children:"\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0435"})}),Object(j.jsxs)("div",{className:"about-project__info-container",children:[Object(j.jsxs)("div",{className:"about-project__info-block",children:[Object(j.jsx)("p",{className:"about-project__subtitle",children:"\u0414\u0438\u043f\u043b\u043e\u043c\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u043b 5 \u044d\u0442\u0430\u043f\u043e\u0432"}),Object(j.jsx)("p",{className:"about-project_paragraph",children:"\u0421\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043b\u0430\u043d\u0430, \u0440\u0430\u0431\u043e\u0442\u0443 \u043d\u0430\u0434 \u0431\u044d\u043a\u0435\u043d\u0434\u043e\u043c, \u0432\u0451\u0440\u0441\u0442\u043a\u0443, \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0438 \u0444\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0438."})]}),Object(j.jsxs)("div",{className:"about-project__info-block",children:[Object(j.jsx)("p",{className:"about-project__subtitle",children:"\u041d\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0434\u0438\u043f\u043b\u043e\u043c\u0430 \u0443\u0448\u043b\u043e 5 \u043d\u0435\u0434\u0435\u043b\u044c"}),Object(j.jsx)("p",{className:"about-project_paragraph",children:"\u0423 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u044d\u0442\u0430\u043f\u0430 \u0431\u044b\u043b \u043c\u044f\u0433\u043a\u0438\u0439 \u0438 \u0436\u0451\u0441\u0442\u043a\u0438\u0439 \u0434\u0435\u0434\u043b\u0430\u0439\u043d, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0443\u0436\u043d\u043e \u0431\u044b\u043b\u043e \u0441\u043e\u0431\u043b\u044e\u0434\u0430\u0442\u044c, \u0447\u0442\u043e\u0431\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0449\u0438\u0442\u0438\u0442\u044c\u0441\u044f."})]})]}),Object(j.jsxs)("div",{className:"about-project__diagram",children:[Object(j.jsx)("div",{className:"about-project__diagram-block about-project__diagram-block_size_s",children:Object(j.jsx)("p",{className:"about-project__diagram-subtitle",children:"1 \u043d\u0435\u0434\u0435\u043b\u044f"})}),Object(j.jsx)("div",{className:"about-project__diagram-block about-project__diagram-block_size_l",children:Object(j.jsx)("p",{className:"about-project__diagram-subtitle",children:"4 \u043d\u0435\u0434\u0435\u043b\u0438"})}),Object(j.jsx)("div",{className:"about-project__diagram-block",children:Object(j.jsx)("p",{className:"about-project__diagram-caption",children:"Back-end"})}),Object(j.jsx)("div",{className:"about-project__diagram-block",children:Object(j.jsx)("p",{className:"about-project__diagram-caption",children:"Front-end"})})]})]})};n(25);var b=function(){return Object(j.jsxs)("section",{id:"techs",className:"techs page__section",children:[Object(j.jsx)("div",{className:"techs__title-container page__section-title-container",children:Object(j.jsx)("h2",{className:"page__section-title techs__title",children:"\u0422\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438"})}),Object(j.jsx)("p",{className:"techs__main-text",children:"7 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0439"}),Object(j.jsx)("div",{className:"techs__paragraph-container",children:Object(j.jsx)("p",{className:"techs__paragraph",children:"\u041d\u0430 \u043a\u0443\u0440\u0441\u0435 \u0432\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043c\u044b \u043e\u0441\u0432\u043e\u0438\u043b\u0438 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043b\u0438 \u0432 \u0434\u0438\u043f\u043b\u043e\u043c\u043d\u043e\u043c \u043f\u0440\u043e\u0435\u043a\u0442\u0435."})}),Object(j.jsx)("div",{className:"techs__diagram",children:Object(j.jsxs)("ul",{className:"techs__diagram-list",children:[Object(j.jsx)("li",{className:"techs__diagram-list-element",children:Object(j.jsx)("div",{className:"techs__diagram-block",children:"HTML"})}),Object(j.jsx)("li",{className:"techs__diagram-list-element",children:Object(j.jsx)("div",{className:"techs__diagram-block",children:"CSS"})}),Object(j.jsx)("li",{className:"techs__diagram-list-element",children:Object(j.jsx)("div",{className:"techs__diagram-block",children:"JS"})}),Object(j.jsx)("li",{className:"techs__diagram-list-element",children:Object(j.jsx)("div",{className:"techs__diagram-block",children:"React"})}),Object(j.jsx)("li",{className:"techs__diagram-list-element",children:Object(j.jsx)("div",{className:"techs__diagram-block",children:"Git"})}),Object(j.jsx)("li",{className:"techs__diagram-list-element",children:Object(j.jsx)("div",{className:"techs__diagram-block",children:"Express.js"})}),Object(j.jsx)("li",{className:"techs__diagram-list-element",children:Object(j.jsx)("div",{className:"techs__diagram-block",children:"mongoDB"})})]})})]})},h=(n(26),n.p+"static/media/den.92debeae.png");var p=function(){return Object(j.jsxs)("section",{id:"aboutMe",className:"about-me page__section",children:[Object(j.jsx)("div",{className:"about-me__title-container page__section-title-container",children:Object(j.jsx)("h2",{className:"page__section-title",children:"\u0421\u0442\u0443\u0434\u0435\u043d\u0442"})}),Object(j.jsxs)("div",{className:"about-me__info-container",children:[Object(j.jsxs)("div",{className:"about-me__paragraph",children:[Object(j.jsx)("p",{className:"about-me__name",children:"\u0414\u0435\u043d\u0438\u0441"}),Object(j.jsx)("p",{className:"about-me__subtitle",children:"\u0424\u0440\u043e\u043d\u0442\u0435\u043d\u0434-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a, 47 \u043b\u0435\u0442"}),Object(j.jsx)("p",{className:"about-me__text",children:"\u042f \u0440\u043e\u0434\u0438\u043b\u0441\u044f \u0438 \u0436\u0438\u0432\u0443 \u0432 \u0421\u0430\u0440\u0430\u0442\u043e\u0432\u0435, \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442 \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u043a\u0438 \u0421\u0413\u0423. \u0423 \u043c\u0435\u043d\u044f \u0435\u0441\u0442\u044c \u0436\u0435\u043d\u0430 \u0438 \u0434\u043e\u0447\u044c. \u042f \u043b\u044e\u0431\u043b\u044e \u0441\u043b\u0443\u0448\u0430\u0442\u044c \u043c\u0443\u0437\u044b\u043a\u0443, \u0430 \u0435\u0449\u0451 \u0443\u0432\u043b\u0435\u043a\u0430\u044e\u0441\u044c \u0431\u0435\u0433\u043e\u043c. \u041d\u0435\u0434\u0430\u0432\u043d\u043e \u043d\u0430\u0447\u0430\u043b \u043a\u043e\u0434\u0438\u0442\u044c. \u0421 2015 \u0433\u043e\u0434\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u043b \u0432 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 \xab\u0421\u041a\u0411 \u041a\u043e\u043d\u0442\u0443\u0440\xbb. \u041f\u043e\u0441\u043b\u0435 \u0442\u043e\u0433\u043e, \u043a\u0430\u043a \u043f\u0440\u043e\u0448\u0451\u043b \u043a\u0443\u0440\u0441 \u043f\u043e \u0432\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435, \u043d\u0430\u0447\u0430\u043b \u0437\u0430\u043d\u0438\u043c\u0430\u0442\u044c\u0441\u044f \u0444\u0440\u0438\u043b\u0430\u043d\u0441-\u0437\u0430\u043a\u0430\u0437\u0430\u043c\u0438 \u0438 \u0443\u0448\u0451\u043b \u0441 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u044b."}),Object(j.jsxs)("div",{className:"about-me__contact-links",children:[Object(j.jsx)("a",{href:"https://www.facebook.com/pomarki",className:"about-me__link page__link",children:"Facebook"}),Object(j.jsx)("a",{href:"https://github.com/pomarki",className:"about-me__link page__link",children:"Github"})]})]}),Object(j.jsx)("img",{src:h,alt:"\u0414\u0435\u043d\u0438\u0441",className:"about-me__photo"})]})]})};n(27);var v=function(){return Object(j.jsx)("section",{className:"portfolio page__section",children:Object(j.jsxs)("div",{className:"portfolio__example-container",children:[Object(j.jsx)("h2",{className:"portfolio__title",children:"\u041f\u043e\u0440\u0442\u0444\u043e\u043b\u0438\u043e"}),Object(j.jsxs)("ul",{className:"portfolio__links-list",children:[Object(j.jsx)("li",{className:"portfolio__links-list-element",children:Object(j.jsxs)("div",{className:"portfolio__example-block page__link",children:[Object(j.jsx)("a",{href:"https://pomarki.github.io/how-to-learn/",target:"_blank",rel:"noopener noreferrer",className:"portfolio__example-element",children:"\u0421\u0442\u0430\u0442\u0438\u0447\u043d\u044b\u0439 \u0441\u0430\u0439\u0442"}),Object(j.jsx)("div",{className:"portfolio__example-button"})]})}),Object(j.jsx)("li",{className:"portfolio__links-list-element",children:Object(j.jsxs)("div",{className:"portfolio__example-block page__link",children:[Object(j.jsx)("a",{href:"https://pomarki.github.io/russian-travel/index.html",target:"_blank",rel:"noopener noreferrer",className:"portfolio__example-element",children:"\u0410\u0434\u0430\u043f\u0442\u0438\u0432\u043d\u044b\u0439 \u0441\u0430\u0439\u0442"}),Object(j.jsx)("div",{className:"portfolio__example-button"})]})}),Object(j.jsx)("li",{className:"portfolio__links-list-element",children:Object(j.jsxs)("div",{className:"portfolio__example-block page__link",children:[Object(j.jsx)("a",{href:"https://pomarki.github.io/mesto/",target:"_blank",rel:"noopener noreferrer",className:"portfolio__example-element",children:"\u041e\u0434\u043d\u043e\u0441\u0442\u0440\u0430\u043d\u0438\u0447\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435"}),Object(j.jsx)("div",{className:"portfolio__example-button"})]})})]})]})})};n(28);var O=function(e){var t=e.isOpen;return Object(j.jsxs)("footer",{className:"footer ".concat(t&&"footer_opened"," page__section"),children:[Object(j.jsx)("p",{className:"footer__title",children:"\u0423\u0447\u0435\u0431\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c \u0445 BeatFilm."}),Object(j.jsxs)("div",{className:"footer__container",children:[Object(j.jsxs)("p",{className:"footer__copyright",children:["\xa9 ",(new Date).getFullYear()]}),Object(j.jsxs)("div",{className:"footer__links-block",children:[Object(j.jsx)("a",{href:"https://practicum.yandex.ru",className:"footer__link page__link",children:"\u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c"}),Object(j.jsx)("a",{href:"https://github.com/yandex-praktikum",className:"footer__link page__link",children:"Github"}),Object(j.jsx)("a",{href:"https://www.facebook.com/yandex.practicum",className:"footer__link page__link",children:"Facebook"})]})]})]})};var g=function(e){var t=e.isOpen,n=e.loggedIn;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(_,{loggedIn:n}),Object(j.jsxs)("main",{className:"main ".concat(t&&"main_opened"),children:[Object(j.jsx)(m,{}),Object(j.jsx)(u,{}),Object(j.jsx)(b,{}),Object(j.jsx)(p,{}),Object(j.jsx)(v,{})]}),Object(j.jsx)(O,{isOpen:!0})]})};n(29),n(30);var f=function(e){var t=e.isOpen,n=function(e){return e.isActive?"small-panel__link page__link small-panel__link_actual":"small-panel__link page__link"};return Object(j.jsxs)("div",{className:"small-panel ".concat(t&&"small-panel_opened"),children:[Object(j.jsx)("div",{className:"small-panel__container",children:Object(j.jsxs)("nav",{className:"small-panel__links-list",children:[Object(j.jsx)(o.c,{to:"/movies",className:n,children:"\u0424\u0438\u043b\u044c\u043c\u044b"}),Object(j.jsx)(o.c,{to:"/saved-movies",className:n,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"})]})}),Object(j.jsx)(o.c,{to:"/profile",className:"small-panel__title  page__link",children:Object(j.jsx)("div",{className:"small-panel__user",children:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"})})]})};n(31);var x=function(e){var t=e.isOpen,n=e.onClose,a=function(e){return e.isActive?"navigation__link page__link navigation__link_actual":"navigation__link page__link"};return Object(j.jsx)("section",{className:"navigation__popup ".concat(t&&"navigation__popup_opened"),children:Object(j.jsx)("div",{className:"navigation__popup-container",children:Object(j.jsxs)("div",{className:"navigation ".concat(t&&"navigation_opened"),children:[Object(j.jsx)("button",{onClick:n,className:"navigation__close-button page__link"}),Object(j.jsx)("div",{className:"navigation__container",children:Object(j.jsxs)("nav",{className:"navigation__links-list",children:[Object(j.jsx)(o.c,{to:"/",className:a,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(j.jsx)(o.c,{to:"/movies",className:a,children:"\u0424\u0438\u043b\u044c\u043c\u044b"}),Object(j.jsx)(o.c,{to:"/saved-movies",className:a,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"})]})}),Object(j.jsx)(o.c,{to:"/profile",className:"small-panel__title  page__link",children:Object(j.jsx)("div",{className:"navigation__user",children:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"})})]})})})};var N=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],s=t[1];return Object(j.jsxs)("header",{className:"header page__section",children:[Object(j.jsxs)("div",{className:"header__container",children:[Object(j.jsx)(o.b,{to:"/",children:Object(j.jsx)("div",{className:"page__logo page__link"})}),Object(j.jsx)("div",{className:"header__navigation-container ".concat(n&&"header__navigation-container_inactive"),children:Object(j.jsx)(f,{isOpen:!n})}),Object(j.jsx)("button",{id:"header-navigation-button",className:"header__navigation-button page__link",onClick:function(){s(!0)}})]}),Object(j.jsx)(x,{isOpen:n,onClose:function(){s(!1)}})]})};n(32),n(33);var k=function(e){var t=e.onFilter,n=e.buttonState;return Object(j.jsxs)("div",{className:"filter-checkbox",children:[Object(j.jsx)("button",{onClick:t,className:"filter-checkbox__button page__link ".concat(!n&&"filter-checkbox__button_type_inactive"),children:Object(j.jsx)("div",{className:"filter-checkbox__toggle"})}),Object(j.jsx)("p",{className:"filter-checkbox__subtitle",children:"\u041a\u043e\u0440\u043e\u0442\u043a\u043e\u043c\u0435\u0442\u0440\u0430\u0436\u043a\u0438"})]})};n(34);var w=function(e){var t,n=e.message;return t="search"===e.type?"info-message__text info-message__text_search":"info-message__text",Object(j.jsx)("div",{className:"info-message__container",children:Object(j.jsx)("p",{className:t,children:n})})};var S=function(e){var t=e.onSubmit,n=e.onFilter,s=e.buttonState,i=e.isLoading,c=e.message,o=Object(a.useState)(""),r=Object(l.a)(o,2),d=r[0],_=r[1],m=Object(a.useState)(!0),u=Object(l.a)(m,2),b=u[0],h=u[1];return Object(j.jsx)("section",{className:"search-form page__section",children:Object(j.jsxs)("div",{className:"search-form__container",children:[Object(j.jsxs)("div",{className:"search-form__search-bar",children:[Object(j.jsx)("div",{className:"search-form__info-icon"}),Object(j.jsx)("input",{className:"search-form__input",required:!0,disabled:!b,id:"find-film",type:"text",placeholder:"\u0424\u0438\u043b\u044c\u043c",value:d,onChange:function(e){_(e.target.value)}}),Object(j.jsxs)("div",{className:"search-form__find-block",children:[Object(j.jsx)("button",{className:"search-form__button page__link ".concat(!b&&"search-form__button_inactive"),type:"button",onClick:function(e){if(e.preventDefault(),""===d)return h(!1),_("\u041d\u0443\u0436\u043d\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e"),void setTimeout((function(){_(""),h(!0)}),2e3);t(d)},disabled:!b}),Object(j.jsx)("div",{className:"search-form__break-line"}),Object(j.jsx)("div",{className:"search-form__filter-container search-form__filter-container_type_in",children:Object(j.jsx)(k,{onFilter:n,buttonState:s})})]})]}),Object(j.jsx)("div",{className:"search-form__filter-container search-form__filter-container_type_out",children:Object(j.jsx)(k,{onFilter:n,buttonState:s})}),!i&&Object(j.jsx)(w,{message:c,type:"search"})]})})},y=(n(35),n(36),function(e,t){return e.filter((function(e){return e.duration<=t}))}),I=function(e,t){t(e),setTimeout((function(){return t("")}),5e3)};var E=function(e){var t=e.card,n=e.listTypeSaved,a=e.onLike,s=e.onDelete,i=e.likedMovies,c=!1,o=null===t||void 0===t?void 0:t.nameRU,r=null===t||void 0===t?void 0:t.image,l=function(e){if(isNaN(e))return"";var t=Math.trunc(e/60),n=e%60;return"".concat(t," \u0447 ").concat(n," \u043c")}(t.duration),d=null===t||void 0===t?void 0:t.trailer;return c=!0!==n&&i.find((function(e){return e.movieId===t.movieId})),Object(j.jsxs)("li",{className:"movies-card",children:[Object(j.jsxs)("div",{className:"movies-card__info",children:[Object(j.jsx)("p",{className:"movies-card__title",children:o}),Object(j.jsx)("p",{className:"movies-card__duration",children:l}),Object(j.jsx)("button",{onClick:function(){a({country:t.country,director:t.director,duration:t.duration,year:t.year,description:t.description,image:t.image,trailer:t.trailer,thumbnail:t.thumbnail,movieId:t.movieId,nameRU:t.nameRU,nameEN:t.nameEN})},className:"page__link movies-card__button movies-card__like-ikon ".concat((n||c)&&"movies-card__button_invisible")}),Object(j.jsx)("button",{onClick:function(){s(function(e,t){var n=e.movieId;return t.filter((function(e){return e.movieId===n}))[0]._id}(t,i))},className:"page__link movies-card__button movies-card__like-ikon movies-card__like-ikon_type_active ".concat((n||!c)&&"movies-card__button_invisible"," ")}),Object(j.jsx)("button",{onClick:function(){s(t._id)},className:"page__link movies-card__button movies-card__delete-icon ".concat(!n&&"movies-card__button_invisible")})]}),Object(j.jsx)("a",{href:d,target:"_blank",rel:"noopener noreferrer",children:Object(j.jsx)("img",{src:"".concat(r),alt:o,className:"movies-card__pic"})})]})},F=(n(37),function(e){var t=e.isLoading;return Object(j.jsx)("div",{className:"preloader ".concat(t&&"preloader_open"),children:Object(j.jsx)("div",{className:"preloader__container",children:Object(j.jsx)("span",{className:"preloader__round"})})})});var M=function(e){var t=e.isOpen,n=e.movies,s=e.savedMovies,i=e.listTypeSaved,c=e.onLike,o=e.likedMovies,d=e.onDelete,_=e.isLoading,m=Object(a.useState)(window.innerWidth),u=Object(l.a)(m,2),b=u[0],h=u[1],p=Object(a.useState)(i?n.length:window.innerWidth>321?7:5),v=Object(l.a)(p,2),O=v[0],g=v[1],f=Object(a.useState)(0),x=Object(l.a)(f,2),N=x[0],k=x[1],w=Object(a.useState)([]),S=Object(l.a)(w,2),y=S[0],I=S[1],M=Object(a.useState)(!1),C=Object(l.a)(M,2),L=C[0],U=C[1],R=Object(a.useState)([]),T=Object(l.a)(R,2),P=T[0],D=T[1],J=function(){h(window.innerWidth)};function z(e,t,n){var a,s=t+e;return U(!0),0===n.length?(a=[],U(!1),a):(s>n.length&&(s=n.length,U(!1)),a=n.slice(t,s),k(s),a)}return Object(a.useEffect)((function(){i?D(n):(I(n),U(n.length>O),D((function(){return z(O,0,y)})))}),[n,O,y]),Object(a.useEffect)((function(){return window.addEventListener("resize",J),function(){return window.removeEventListener("resize",J)}}),[]),Object(a.useEffect)((function(){var e;e=b,g(i?n.length:e>321?7:5)}),[b]),Object(j.jsxs)("section",{className:"movies-card-list ".concat(t&&"movies-card-list_opened"," page__section"),children:[_&&Object(j.jsx)(F,{}),Object(j.jsx)("ul",{className:"movies-card-list__container ".concat(!_&&"movies-card-list__container_visible"),children:P.map((function(e){return Object(j.jsx)(E,{card:e,listTypeSaved:i,onLike:c,savedMovies:s,likedMovies:o,onDelete:d},e.movieId)}))}),Object(j.jsx)("div",{className:"movies-card-list__button-container",children:Object(j.jsx)("button",{className:"movies-card-list__more-button page__link ".concat((!L||i||_)&&"movies-card-list__more-button_type_inactive"),onClick:function(){return e=z(O,N,y),t=P,void D([].concat(Object(r.a)(t),Object(r.a)(e)));var e,t},children:"\u0415\u0449\u0451"})})]})};var C=function(e){var t=e.message,n=e.filtredMovies,a=e.savedMovies,s=e.onSubmit,i=e.onLike,c=e.onDelete,o=e.isDurationFilter,r=e.buttonState,l=e.isLoading,d=function(e,t){for(var n=[],a=0;a<t.length;a++)for(var s=0;s<e.length;s++)t[a].movieId===e[s].movieId&&n.push(t[a]);return n}(n,a);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(N,{}),Object(j.jsxs)("main",{className:"page__section",children:[Object(j.jsx)(S,{onSubmit:s,onFilter:o,buttonState:r,isLoading:l,message:t}),Object(j.jsx)(M,{isLoading:l,isOpen:!0,movies:n,listTypeSaved:!1,onLike:i,onDelete:c,likedMovies:d,savedMovies:a})]}),Object(j.jsx)(O,{isOpen:!0})]})};n(38);var L=function(e){var t,n=e.isOpen,a=e.onDelete,s=e.onSubmit,i=e.filtredMovies,c=e.savedMovies,o=e.isDurationFilter,r=e.buttonState,l=e.message,d=e.isLoading;return t=""===l&&0===i.length?c:i,Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(N,{}),Object(j.jsxs)("main",{className:"saved-movies ".concat(n&&"saved-movies_opened"," page__section"),children:[Object(j.jsx)(S,{onSubmit:s,onFilter:o,buttonState:r,message:l}),Object(j.jsx)(M,{message:l,isOpen:!0,filtredMovies:i,movies:t,listTypeSaved:!0,onDelete:a,isLoading:d})]}),Object(j.jsx)(O,{isOpen:!0})]})};n(39),n(40);var U=function(e){var t=e.type,n=e.message,a=e.handleLogout,s=e.handleUpdateUser,i=e.handleUpdateForm,c=e.isValid,o=e.updateInProgress;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"button-container ".concat(t&&"button-container__type_inactive"),children:[Object(j.jsx)("button",{className:"button-container__button button-container__button_type_edit page__link",id:"profile-edit-button",onClick:i,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(j.jsx)("button",{className:"button-container__button button-container__button_type_out page__link",id:"profile-out-button",onClick:a,children:"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"})]}),Object(j.jsxs)("div",{className:"button-container ".concat(!t&&"button-container__type_inactive"),children:[Object(j.jsx)("p",{className:"button-container__error-message",children:n}),Object(j.jsx)("button",{className:"button-container__save-button page__link ".concat((!c||o)&&"button-container__save-button_type_inactive"),id:"profile-save-button",onClick:s,disabled:!c||o,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})},R=s.a.createContext(),T=n(9),P=n(10);var D=function(){var e=Object(a.useState)({}),t=Object(l.a)(e,2),n=t[0],s=t[1],i=Object(a.useState)({}),c=Object(l.a)(i,2),o=c[0],r=c[1],d=Object(a.useState)(!1),j=Object(l.a)(d,2),_=j[0],m=j[1],u=Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s(e),r(t),m(n)}),[s,r,m]);return{values:n,errors:o,isValid:_,handleChange:function(e){var t=e.target,a=t.value,i=t.name;s(Object(P.a)(Object(P.a)({},n),{},Object(T.a)({},i,a))),r(Object(P.a)(Object(P.a)({},o),{},Object(T.a)({},i,t.validationMessage))),m(t.closest("form").checkValidity())},resetForm:u}};var J=function(e){var t=e.handleLogout,n=e.updateUser,s=e.isUpdateMessage,i=e.updateInProgress,c=Object(a.useContext)(R),o=D(),r=o.values,d=o.errors,_=o.isValid,m=o.handleChange,u=o.resetForm;Object(a.useEffect)((function(){u({name:c.name,email:c.email})}),[]);var b=Object(a.useState)(!0),h=Object(l.a)(b,2),p=h[0],v=h[1],O=Object(a.useState)(!1),g=Object(l.a)(O,2),f=g[0],x=g[1];return Object(a.useEffect)((function(){c.email===r.email&&c.name===r.name?x(!1):x(!0)}),[m]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(N,{isOpen:!0,navTypeSmall:!0}),Object(j.jsx)("section",{className:"profile page__section",children:Object(j.jsxs)("div",{className:"profile__container profile__container_opened",children:[Object(j.jsxs)("p",{className:"profile__title",children:["\u041f\u0440\u0438\u0432\u0435\u0442, ",c.name,"!"]}),Object(j.jsxs)("form",{className:"profile__edit-form",children:[Object(j.jsxs)("div",{className:"profile__info-block",children:[Object(j.jsx)("p",{className:"profile__info-subtitle",children:"\u0418\u043c\u044f"}),Object(j.jsx)("input",{className:"profile__input profile__info-subtitle ".concat(p&&"profile__input_type_inactive"),name:"name",id:"profile-name",type:"text",value:r.name||"",onChange:m,disabled:i,placeholder:"\u0418\u043c\u044f",required:!0,minLength:"2",maxLength:"30"})]}),Object(j.jsx)("div",{className:"profile__break_line"}),Object(j.jsxs)("div",{className:"profile__info-block",children:[Object(j.jsx)("p",{className:"profile__info-subtitle",children:"E-mail"}),Object(j.jsx)("input",{className:"profile__input profile__info-subtitle ".concat(p&&"profile__input_type_inactive"),id:"profile-email",name:"email",type:"email",value:r.email||"",onChange:m,disabled:i,placeholder:"email",required:!0})]}),Object(j.jsx)("span",{className:"profile__error-message",children:d.email||""})]}),Object(j.jsx)(U,{type:!p,isValid:_&&f,handleLogout:t,handleUpdateUser:function(e){e.preventDefault(),n({name:r.name,email:r.email})},handleUpdateForm:function(){v(!p)},message:s,updateInProgress:i})]})})]})};n(41),n(42);var z=function(e){var t,n,a,s,i,c,r,l,d=e.windowType,_=e.children,m=e.message,u=e.onLogin,b=e.onRegister,h=e.isValid,p=e.requestInProgress;return t="register"===d?"/signin":"/signup",n="register"===d?"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?":"\u0415\u0449\u0451 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",a="register"===d?"\u0412\u043e\u0439\u0442\u0438":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",s="register"===d?"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f":"\u0412\u043e\u0439\u0442\u0438",i="register"===d?"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c!":"\u0420\u0430\u0434\u044b \u0432\u0438\u0434\u0435\u0442\u044c!",c="register"===d?"register-button":"login-button",r="register"!==d,l="register"===d?b:u,Object(j.jsxs)("form",{className:"entrance-window__form",children:[Object(j.jsx)(o.b,{to:"/",children:Object(j.jsx)("div",{className:"page__logo page__link"})}),Object(j.jsx)("p",{className:"entrance-window__title",children:i}),Object(j.jsx)("div",{className:"entrance-window__form-container ".concat(r&&"entrance-window__form-container_login"),children:_}),Object(j.jsxs)("div",{className:"entrance-window__button-container ".concat(r&&"entrance-window__button-container_login"),children:[Object(j.jsx)(w,{message:m}),Object(j.jsx)("button",{className:"entrance-window__reg-button page__link ".concat((!h||p)&&"entrance-window__reg-button_inactive"),id:c,onClick:l,disabled:!h||p,children:s})]}),Object(j.jsxs)("div",{className:"entrance-window__link-container",children:[Object(j.jsx)("p",{className:"entrance-window__text entrance-window__text_subtitle",children:n}),Object(j.jsx)(o.b,{to:t,className:"entrance-window__text entrance-window__text_link page__link",children:a})]})]})};var q=function(e){var t=e.registerUser,n=e.isRegisterMessage,s=e.registerInProgress,i=D(),c=i.values,o=i.errors,r=i.isValid,l=i.handleChange,d=i.resetForm;return Object(a.useEffect)((function(){d()}),[d]),Object(j.jsx)("section",{className:"register page__section",children:Object(j.jsxs)(z,{isRegisterOpen:!0,onRegister:function(e){e.preventDefault(),t(c.name,c.password,c.email),d()},windowType:"register",values:c,isValid:r,errors:o,message:n,requestInProgress:s,children:[Object(j.jsxs)("div",{className:"entrance-window__input-container",children:[Object(j.jsx)("label",{className:"entrance-window__label",htmlFor:"register-user",children:"\u0418\u043c\u044f"}),Object(j.jsx)("input",{type:"text",name:"name",required:!0,id:"register-user",minLength:"2",value:c.name||"",onChange:l,disabled:s,className:"entrance-window__text entrance-window__text_input register__input"}),Object(j.jsx)("div",{className:"entrance-window__breakline"}),Object(j.jsx)("span",{className:"entrance-window__error-message",children:o.name||""})]}),Object(j.jsxs)("div",{className:"entrance-window__input-container",children:[Object(j.jsx)("label",{className:"entrance-window__label",htmlFor:"register-email",children:"E-mail"}),Object(j.jsx)("input",{type:"email",name:"email",id:"register-email",required:!0,value:c.email||"",onChange:l,disabled:s,className:"entrance-window__text entrance-window__text_input register__input"}),Object(j.jsx)("div",{className:"entrance-window__breakline"}),Object(j.jsx)("span",{className:"entrance-window__error-message",children:o.email||""})]}),Object(j.jsxs)("div",{className:"entrance-window__input-container",children:[Object(j.jsx)("label",{className:"entrance-window__label",htmlFor:"register-password",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(j.jsx)("input",{name:"password",type:"password",id:"register-password",required:!0,value:c.password||"",onChange:l,disabled:s,className:"entrance-window__text entrance-window__text_input register__input"}),Object(j.jsx)("div",{className:"entrance-window__breakline"}),Object(j.jsx)("span",{className:"entrance-window__error-message",children:o.password||""})]})]})})};n(43);var B=function(e){var t=e.authorizationUser,n=e.isLoginMessage,s=e.loginInProgress,i=D(),c=i.values,o=i.errors,r=i.isValid,l=i.handleChange,d=i.resetForm;return Object(a.useEffect)((function(){d()}),[d]),Object(j.jsx)("section",{className:"login page__section",children:Object(j.jsxs)(z,{isLoginOpen:!0,windowType:"login",message:n,authorizationUser:t,values:c,errors:o,isValid:r,onLogin:function(e){e.preventDefault(),t(c.email,c.password)},requestInProgress:s,children:[Object(j.jsxs)("div",{className:"entrance-window__input-container",children:[Object(j.jsx)("label",{className:"entrance-window__label",children:"E-mail"}),Object(j.jsx)("input",{type:"email",name:"email",value:c.email||"",onChange:l,required:!0,className:"entrance-window__text entrance-window__text_input",disabled:s}),Object(j.jsx)("div",{className:"entrance-window__breakline"}),Object(j.jsx)("span",{className:"entrance-window__error-message",children:o.email||""})]}),Object(j.jsxs)("div",{className:"entrance-window__input-container",children:[Object(j.jsx)("label",{className:"entrance-window__label",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(j.jsx)("input",{type:"password",name:"password",value:c.password||"",onChange:l,required:!0,className:"entrance-window__text entrance-window__text_input ".concat(n&&"entrance-window__text_error"),disabled:s}),Object(j.jsx)("div",{className:"entrance-window__breakline"}),Object(j.jsx)("span",{className:"entrance-window__error-message",children:o.password||""})]})]})})};n(44);var V=function(e){var t=e.isOpen,n=Object(d.g)();return Object(j.jsx)("section",{className:"page-not-found ".concat(t&&"page-not-found_opened"),children:Object(j.jsxs)("div",{className:"page-not-found__container",children:[Object(j.jsx)("p",{className:"page-not-found__title",children:"404"}),Object(j.jsx)("p",{className:"page-not-found__subtitle",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(j.jsx)("button",{onClick:function(){return n(-1)},className:"page-not-found__link page__link",children:"\u041d\u0430\u0437\u0430\u0434"})]})})},A=function(e){var t=e.children;return e.loggedIn?t:Object(j.jsx)(d.a,{to:"/signin"})},G={unauthorizedError:"\u0412\u044b \u0432\u0432\u0435\u043b\u0438 \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c.",tokenFormatError:"\u041f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u043d\u0435 \u0432 \u0442\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435.",invalidTokenError:"\u041f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u044b\u0439 \u0442\u043e\u043a\u0435\u043d \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0435\u043d.",conflictEmailError:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c email \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.",registrationError:"\u041f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430.",updateProfileError:"\u041f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430.",serverError:"500 \u041d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430.",notFoundError:"404 \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043f\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c\u0443 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0443 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430.",successfulUpdate:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f!",successfulRegister:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!",waitingForUpdate:"\u0416\u0434\u0438\u0442\u0435. \u041e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440.",moviesNotFound:"\u0424\u0438\u043b\u044c\u043c\u043e\u0432 \u043f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e.",savedMoviesNotFound:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0445 \u0444\u0438\u043b\u044c\u043c\u043e\u0432 \u043f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e.",shortMoviesNotFound:"\u041a\u043e\u0440\u043e\u0442\u043a\u043e\u043c\u0435\u0442\u0440\u0430\u0436\u043d\u044b\u0445 \u0444\u0438\u043b\u044c\u043c\u043e\u0432 \u043f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e.",savedShortMoviesNotFound:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0445 \u043a\u043e\u0440\u043e\u0442\u043a\u043e\u043c\u0435\u0442\u0440\u0430\u0436\u043d\u044b\u0445 \u0444\u0438\u043b\u044c\u043c\u043e\u0432 \u043f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e."},W="https://api.kino-domino.nomoredomains.rocks";function H(e){return e.ok?e.json():Promise.reject(e)}var Q=n(13),K=n(14),X=new(function(){function e(t){var n=t.address;Object(Q.a)(this,e),this._address=n}return Object(K.a)(e,[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject(e)}},{key:"getUserMovies",value:function(){return fetch("".concat(this._address,"/movies"),{headers:{authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then(this._checkResponse)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._address,"/users/me"),{method:"GET",headers:{authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then(this._checkResponse)}},{key:"changeUserInfo",value:function(e){return fetch("".concat(this._address,"/users/me"),{method:"PATCH",headers:{authorization:"Bearer ".concat(localStorage.getItem("jwt")),"Content-Type":"application/json"},body:JSON.stringify({name:e.name,email:e.email})}).then(this._checkResponse)}},{key:"chooseNewMovie",value:function(e){return fetch("".concat(this._address,"/movies"),{method:"POST",headers:{authorization:"Bearer ".concat(localStorage.getItem("jwt")),"Content-Type":"application/json"},body:JSON.stringify({country:e.country,director:e.director,duration:e.duration,year:e.year,description:e.description,image:e.image,trailer:e.trailer,thumbnail:e.thumbnail,movieId:e.movieId,nameRU:e.nameRU,nameEN:e.nameEN})}).then(this._checkResponse)}},{key:"removeMovie",value:function(e){return fetch("".concat(this._address,"/movies/").concat(e),{method:"DELETE",headers:{authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then(this._checkResponse)}}]),e}())({address:"https://api.kino-domino.nomoredomains.rocks"}),Y=function(){return fetch("https://api.nomoreparties.co/beatfilm-movies",{method:"GET",headers:{"Content-Type":"application/json; charset=utf-8"}}).then((function(e){return e.ok?e.json():Promise.reject(e.status)}))};n(45);var Z=function(e){var t=e.user,n=e.isOpen,a=e.onClose;return Object(j.jsx)("div",{className:"popup__overlay ".concat(n&&"popup_open"),children:Object(j.jsxs)("div",{className:"popup__container",children:[Object(j.jsxs)("div",{className:"popup__main",children:[Object(j.jsxs)("h1",{className:"popup__title",children:[t||"\u0414\u043e\u0440\u043e\u0433\u043e\u0439 \u0434\u0440\u0443\u0433","!"]}),Object(j.jsx)("p",{className:"popup__text",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0441 \u0432\u0430\u0448\u0435\u0433\u043e ip \u043f\u0440\u0435\u0432\u044b\u0441\u0438\u043b\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0439 \u043b\u0438\u043c\u0438\u0442, \u043d\u043e \u0447\u0435\u0440\u0435\u0437 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u0432\u0441\u0451 \u043d\u0430\u043b\u0430\u0434\u0438\u0442\u0441\u044f."})]}),Object(j.jsx)("button",{onClick:function(){return a()},className:"page__link popup__button",children:"OK"})]})})};var $=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],s=t[1],i=Object(a.useState)(""),c=Object(l.a)(i,2),o=c[0],_=c[1],m=Object(a.useState)(""),u=Object(l.a)(m,2),b=u[0],h=u[1],p=Object(a.useState)(!1),v=Object(l.a)(p,2),O=v[0],f=v[1],x=Object(a.useState)({}),N=Object(l.a)(x,2),k=N[0],w=N[1],S=Object(a.useState)(!1),E=Object(l.a)(S,2),F=E[0],M=E[1],U=Object(a.useState)(!1),T=Object(l.a)(U,2),P=T[0],D=T[1],z=Object(a.useState)(!1),Q=Object(l.a)(z,2),K=Q[0],$=Q[1],ee=Object(a.useState)([]),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],se=Object(a.useState)([]),ie=Object(l.a)(se,2),ce=ie[0],oe=ie[1],re=Object(a.useState)([]),le=Object(l.a)(re,2),de=le[0],je=le[1],_e=Object(a.useState)([]),me=Object(l.a)(_e,2),ue=me[0],be=me[1],he=Object(a.useState)(!0),pe=Object(l.a)(he,2),ve=pe[0],Oe=pe[1],ge=Object(a.useState)(""),fe=Object(l.a)(ge,2),xe=fe[0],Ne=fe[1],ke=Object(a.useState)(!1),we=Object(l.a)(ke,2),Se=we[0],ye=we[1],Ie=Object(d.g)(),Ee=Object(d.f)();function Fe(){var e="https://api.nomoreparties.co",t="https://ic.pics.livejournal.com/pomarki/910249/22199/22199_900.png",n="\u043d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445";Y().then((function(a){var s=a.map((function(a){var s,i,c,o,r,l,d,j,_=(null===(s=a.image.formats)||void 0===s||null===(i=s.small)||void 0===i?void 0:i.url)?e+(null===(c=a.image.formats)||void 0===c||null===(o=c.small)||void 0===o?void 0:o.url):t,m=(null===(r=a.image.formats)||void 0===r||null===(l=r.thumbnail)||void 0===l?void 0:l.url)?e+(null===(d=a.image.formats)||void 0===d||null===(j=d.thumbnail)||void 0===j?void 0:j.url):t,u=a.country?a.country:n,b=a.director?a.director:n,h=a.duration?a.duration:0,p=a.year?a.year:0,v=a.description?a.description:n,O=a.trailerLink?a.trailerLink:"https://www.youtube.com/watch?v=dQw4w9WgXcQ",g=a.nameRU?a.nameRU:a.nameEN,f=a.nameEN?a.nameEN:n;return{country:u,director:b,duration:h,year:p,description:v,image:m,trailer:O,thumbnail:_,movieId:a.id,nameRU:g,nameEN:f}}));localStorage.setItem("allMovies",JSON.stringify(s)),ae(s)})).catch((function(e){return console.log(e)}))}function Me(e,t){Ne("");var n=function(e){return e.toLowerCase()},a=Ee.pathname;t=n(t);var s=e.filter((function(e){return n(e.nameRU).includes(t)||n(e.nameEN).includes(t)||n(e.description).includes(t)}));0===s.length&&"/movies"===a&&Ne(G.moviesNotFound),0===s.length&&"/saved-movies"===a&&Ne(G.savedMoviesNotFound);var i=y(s,40);K&&0===i.length&&"/movies"===a&&Ne(G.shortMoviesNotFound),K&&0===i.length&&"/saved-movies"===a&&Ne(G.savedShortMoviesNotFound),"/movies"===a&&(localStorage.setItem("searchResult",JSON.stringify(s)),localStorage.setItem("searchResultShort",JSON.stringify(i))),"/saved-movies"===a&&localStorage.setItem("searchResultSaved",JSON.stringify(s))}function Ce(e){X.removeMovie(e).then((function(t){var n=JSON.parse(localStorage.getItem("savedMovies"));n=n.filter((function(t){return t._id!==e})),je(n),localStorage.setItem("savedMovies",JSON.stringify(n))})).catch((function(e){429===e.status&&ye(!0)}))}return Object(a.useEffect)((function(){localStorage.getItem("jwt")&&Promise.all([X.getUserInfo(),Fe()]).then((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];w(n),X.getUserMovies().then((function(e){var t=Object(r.a)(e.moviesDate);je(t),localStorage.setItem("savedMovies",JSON.stringify(t))})).catch((function(e){return console.log(e)})),ae(a)})).catch((function(e){return console.log(e)}))}),[O]),Object(a.useEffect)((function(){!function(){var e=localStorage.getItem("jwt");e&&(t=e,fetch("".concat(W,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then(H)).then((function(e){e&&(w(e),f(!0),Ie(Ee))})).catch((function(e){Ie("/",{replace:!0})}));var t}()}),[]),Object(j.jsx)(R.Provider,{value:k,children:Object(j.jsxs)("div",{className:"page",children:[Object(j.jsx)(Z,{user:k.name,isOpen:Se,onClose:function(){ye(!1)}}),Object(j.jsxs)(d.d,{children:[Object(j.jsx)(d.b,{path:"/",element:Object(j.jsx)(g,{isOpen:!0,loggedIn:O})}),Object(j.jsx)(d.b,{path:"/movies",element:Object(j.jsx)(A,{loggedIn:O,children:Object(j.jsx)(C,{message:xe,isDurationFilter:function(){Ne("");var e=JSON.parse(localStorage.getItem("searchResult"));null===e&&(e=[]);var t=JSON.parse(localStorage.getItem("searchResultShort"));0!==e.length?(0!==t.length||K||Ne(G.shortMoviesNotFound),K?(oe(e),$(!K)):(oe(t),$(!K))):$(!K)},filtredMovies:ce,savedMovies:de,onSubmit:function(e){D(!0),oe([]),setTimeout((function(){return D(!1)}),1e3),Me(ne,e);var t=JSON.parse(localStorage.getItem("searchResult")),n=JSON.parse(localStorage.getItem("searchResultShort"));oe(K?n:t)},onLike:function(e){X.chooseNewMovie(e).then((function(e){var t=[].concat(Object(r.a)(de),[e.movie]);je(t),localStorage.setItem("savedMovies",JSON.stringify(t))})).catch((function(e){429===e.status&&ye(!0)}))},onDelete:Ce,buttonState:K,isLoading:P})})}),Object(j.jsx)(d.b,{path:"/saved-movies",element:Object(j.jsx)(A,{loggedIn:O,children:Object(j.jsx)(L,{message:xe,isDurationFilter:function(){var e,t;Ne(""),ve?(e=de,t=y(de,40)):(e=JSON.parse(localStorage.getItem("searchResultSaved")),t=y(e,40)),null===e&&(e=[]),0!==e.length?(0!==t.length||K||Ne(G.savedShortMoviesNotFound),K?(be(e),$(!K)):(be(t),$(!K))):$(!K)},filtredMovies:ue,savedMovies:de,isOpen:!0,onSubmit:function(e){Oe(!1),D(!0),setTimeout((function(){return D(!1)}),1e3),Me(de,e);var t=JSON.parse(localStorage.getItem("searchResultSaved"));be(K?y(t,40):t)},onDelete:Ce,buttonState:K,isLoading:P})})}),Object(j.jsx)(d.b,{path:"/profile",element:Object(j.jsx)(A,{loggedIn:O,children:Object(j.jsx)(J,{handleLogout:function(){localStorage.removeItem("jwt"),localStorage.removeItem("allMovies"),localStorage.removeItem("savedMovies"),localStorage.removeItem("searchResult"),localStorage.removeItem("searchResultShort"),localStorage.removeItem("searchResultSaved"),w({}),f(!1),je([]),oe([]),be([]),Ie("/",{replace:!0})},updateUser:function(e){h(G.waitingForUpdate),M(!0),X.changeUserInfo(e).then((function(e){M(!1),w(e),I(G.successfulUpdate,h)})).catch((function(e){return M(!1),400===e.status?I(G.registrationError,h):409===e.status?I(G.conflictEmailError,h):I(G.serverError,h)}))},isUpdateMessage:b,updateInProgress:F})})}),Object(j.jsx)(d.b,{path:"/signup",element:Object(j.jsx)(q,{registerUser:function(e,t,n){s(G.waitingForUpdate),M(!0),function(e,t,n){return fetch("".concat(W,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:e,password:t,email:n})}).then(H)}(e,t,n).then((function(e){s(G.successfulRegister),M(!1),setTimeout((function(){return Ie("/signin",{replace:!0})}),5e3)})).catch((function(e){return M(!1),400===e.status?I(G.registrationError,s):409===e.status?I(G.conflictEmailError,s):I(G.serverError,s)}))},isRegisterMessage:n,registerInProgress:F})}),Object(j.jsx)(d.b,{path:"/signin",element:Object(j.jsx)(B,{authorizationUser:function(e,t){_(G.waitingForUpdate),M(!0),function(e,t){return fetch("".concat(W,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:t,email:e})}).then(H).then((function(e){return e.token?(localStorage.setItem("jwt",e.token),e.token):void 0}))}(e,t).then((function(e){M(!1),e&&(f(!0),_(""),Ie("/movies",{replace:!0}))})).catch((function(e){return M(!1),401===e.status?I(G.unauthorizedError,_):I(G.serverError,_)}))},isLoginMessage:o,loginInProgress:F})}),Object(j.jsx)(d.b,{path:"*",element:Object(j.jsx)(V,{isOpen:!0})})]})]})})},ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,47)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),i(e),c(e)}))};c.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(o.a,{children:Object(j.jsx)($,{})})}),document.getElementById("root")),ee()}]),[[46,1,2]]]);
//# sourceMappingURL=main.1ecfacf5.chunk.js.map